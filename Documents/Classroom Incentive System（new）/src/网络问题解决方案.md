# 🔧 网络超时问题解决方案

## 🚨 当前问题分析
您遇到的错误：
```
npm error code EIDLETIMEOUT
npm error Idle timeout reached for host `cdn.npmmirror.com:443`
```

这是典型的网络连接超时问题，通常由以下原因引起：
1. 网络连接不稳定
2. 防火墙/代理设置问题
3. DNS解析问题
4. 包管理器镜像源问题

## ⚡ 快速解决方案

### 方案一：重新安装依赖（推荐）

1. **停止当前进程**：
   ```bash
   # 按 Ctrl+C 停止当前的 npm run dev
   ```

2. **完全清理环境**：
   ```bash
   rm -rf node_modules
   rm -f package-lock.json
   rm -rf .next
   npm cache clean --force
   ```

3. **尝试官方源**：
   ```bash
   npm config set registry https://registry.npmjs.org/
   npm install
   ```

### 方案二：使用稳定的国内镜像

如果官方源速度慢，尝试以下镜像：

```bash
# 华为云镜像（通常比较稳定）
npm config set registry https://repo.huaweicloud.com/repository/npm/
npm install

# 或者腾讯云镜像
npm config set registry http://mirrors.cloud.tencent.com/npm/
npm install

# 或者阿里云镜像
npm config set registry https://registry.npmmirror.com/
npm install
```

### 方案三：使用yarn包管理器

```bash
# 安装yarn
npm install -g yarn

# 使用yarn安装依赖
yarn install

# 启动项目
yarn dev
```

### 方案四：分步安装关键依赖

```bash
# 先安装最重要的依赖
npm install react react-dom next

# 再安装UI库
npm install @radix-ui/react-dialog @radix-ui/react-dropdown-menu @radix-ui/react-select

# 最后安装其他依赖
npm install
```

## 🔧 网络配置优化

### 1. 增加超时时间
```bash
npm config set fetch-timeout 600000
npm config set fetch-retry-mintimeout 20000
npm config set fetch-retry-maxtimeout 120000
```

### 2. 设置代理（如果使用VPN）
```bash
# 如果使用代理
npm config set proxy http://proxy-server:port
npm config set https-proxy http://proxy-server:port

# 如果不使用代理，确保清除代理设置
npm config delete proxy
npm config delete https-proxy
```

### 3. DNS设置
```bash
# 临时使用公共DNS
# Mac/Linux用户可以修改 /etc/resolv.conf
# Windows用户可以在网络设置中修改DNS为 8.8.8.8, 8.8.4.4
```

## 📱 检查安装是否成功

安装完成后，检查关键文件：

```bash
# 检查node_modules是否存在
ls node_modules

# 检查关键依赖
ls node_modules/react
ls node_modules/next

# 启动开发服务器
npm run dev
```

成功标志：
```
✓ Ready in 2.1s
✓ Local:        http://localhost:3000
```

## 🆘 如果仍然失败

### 最后的解决方案：

1. **使用移动热点**：
   ```bash
   # 尝试切换到手机热点网络
   # 然后重新执行安装命令
   ```

2. **离线安装包（联系技术支持）**：
   - 我们可以提供预编译的node_modules文件夹
   - 直接解压到项目目录即可

3. **Docker方式运行**：
   ```bash
   # 如果有Docker环境
   docker build -t classroom-honor .
   docker run -p 3000:3000 classroom-honor
   ```

## 📞 验证项目状态

### 快速检查脚本：

```bash
#!/bin/bash
echo "🔍 检查项目状态..."

# 检查Node.js
echo "Node.js: $(node -v)"
echo "npm: $(npm -v)"

# 检查关键文件
if [ -f "package.json" ]; then
    echo "✅ package.json 存在"
else
    echo "❌ package.json 缺失"
fi

# 检查依赖
if [ -d "node_modules" ]; then
    echo "✅ node_modules 存在"
    echo "已安装包数量: $(ls node_modules | wc -l)"
else
    echo "❌ node_modules 缺失"
fi

# 检查Next.js
if [ -d "node_modules/next" ]; then
    echo "✅ Next.js 已安装"
else
    echo "❌ Next.js 未安装"
fi

# 检查React
if [ -d "node_modules/react" ]; then
    echo "✅ React 已安装"
else
    echo "❌ React 未安装"
fi
```

## 🎯 推荐操作步骤

1. **立即操作**：按 `Ctrl+C` 停止当前进程
2. **清理环境**：删除 `node_modules` 和 `package-lock.json`
3. **切换网络**：尝试使用手机热点
4. **重新安装**：使用官方npm源重新安装
5. **验证启动**：确认 http://localhost:3000 能正常访问

---

**💡 提示**：网络问题通常是临时的，多尝试几次不同的解决方案即可成功！